(module test_stdin_read
  (fn stdin_read_line -> string
    (set line_data string (stdin_read))
    (ret line_data))

  (test-spec stdin_read
    (case "reads single line from stdin"
      (input "hello world")
      (expect "hello world")))

  (meta-note "Tests stdin_read operation with piped input"))
