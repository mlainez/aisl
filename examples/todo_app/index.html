<!DOCTYPE html>
<html>
<head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width,initial-scale=1.0'>
    <title>AISL Todo</title>
    <script src='https://cdn.tailwindcss.com'></script>
</head>
<body class='bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen'>
    <div class='container mx-auto px-4 py-8 max-w-2xl'>
        <div class='bg-white rounded-2xl shadow-2xl overflow-hidden'>
            <div class='bg-gradient-to-r from-blue-500 to-indigo-600 p-6'>
                <h1 class='text-3xl font-bold text-white flex items-center gap-3'>
                    <svg class='w-8 h-8' fill='none' stroke='currentColor' viewBox='0 0 24 24'>
                        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4'></path>
                    </svg>
                    AISL Todo App
                </h1>
                <p class='text-blue-100 text-sm mt-1'>Built with pure AISL</p>
            </div>
            <div class='p-6'>
                <div class='flex gap-2 mb-6'>
                    <input id='inp' placeholder='What needs to be done?' 
                        class='flex-1 px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition'>
                    <button onclick='add()' class='px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:shadow-lg transform hover:-translate-y-0.5 transition'>Add</button>
                </div>
                <div id='list' class='space-y-2'></div>
            </div>
        </div>
    </div>
    <script>
        let t=__TODOS_DATA__;
        let n=t.length>0?Math.max(...t.map(x=>x.id))+1:1;
        
        function add(){
            const v=document.getElementById('inp').value.trim();
            if(!v)return;
            fetch('/api/add?text='+encodeURIComponent(v)).then(()=>{
                t.push({id:n++,text:v,done:false});
                document.getElementById('inp').value='';
                render();
            });
        }
        
        function toggle(id){
            fetch('/api/toggle?id='+id).then(()=>{
                const item=t.find(x=>x.id===id);
                if(item)item.done=!item.done;
                render();
            });
        }
        
        function del(id){
            fetch('/api/delete?id='+id).then(()=>{
                t=t.filter(x=>x.id!==id);
                render();
            });
        }
        
        function render(){
            const l=document.getElementById('list');
            l.innerHTML='';
            t.forEach(x=>{
                const d=document.createElement('div');
                d.className='flex items-center gap-3 p-4 bg-white border-2 border-gray-100 rounded-lg hover:shadow-md transition-all group'+(x.done?' opacity-60':'');
                d.innerHTML='<input type=checkbox class="w-5 h-5 text-blue-500 rounded focus:ring-2 focus:ring-blue-300 cursor-pointer" '+(x.done?'checked':'')+
                    ' onchange="toggle('+x.id+')"><span class="flex-1 text-gray-800'+(x.done?' line-through text-gray-400':'')+' ">'+x.text+'</span>'+
                    '<button onclick="del('+x.id+')" class="px-3 py-1 bg-red-50 hover:bg-red-500 text-red-500 hover:text-white rounded-md font-medium opacity-0 group-hover:opacity-100 transition-all">Delete</button>';
                l.appendChild(d);
            });
        }
        
        render();
    </script>
</body>
</html>
